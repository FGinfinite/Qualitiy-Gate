# 项目任务进度

本项目遵循 `docs/项目任务.md` 中定义的5个核心任务。

- [x] **任务 1：项目框架原则与环境搭建**
- [x] **任务 2：实现阶段一 - 选择模型预热**
- [x] **任务 3：实现阶段二 - 数据选择**
- [ ] **任务 4：实现阶段三 - 目标模型训练**
- [ ] **任务 5：实现阶段四 - 模型评估**

---
## 其他已完成任务
- [x] **创建权重对比脚本**
  - **成果**: 创建了 `scripts/compare_router_weights.py` 脚本，用于验证和分析阶段一训练后 `router` 权重的变化。
  - **关键决策**: 为了简化模型加载和分析流程，将分布式训练策略从 FSDP 切换到了 DDP。
- [x] **分析Stage 1数据处理流程**
  - **成果**: 明确了第一阶段预训练的数据来源、缓存机制和详细处理步骤。
  - **知识归档**: 分析结论已整合进 `decisionLog.md`。
- [x] **修复Stage 1数据处理错误**
  - **成果**: 解决了因数据集格式不统一导致的 `KeyError: 'text'` 错误，并增加了代码的健壮性以处理潜在的 `None` 值。
  - **知识归档**: 详细的修复过程记录在 `decisionLog.md` 中。
- [x] **修复并优化Stage 2工作流**
  - **成果**: 解决了 Stage 2 的两个核心问题：1) 修复了因 `logits` 计算错误导致所有样本得分相同的逻辑 Bug。2) 修复了因 `InterpolationKeyError` 导致的路径解析崩溃问题。3) 优化了输出逻辑，使结果能够保存到唯一的、带时间戳的目录中，与 Stage 1 行为保持一致。
  - **知识归档**: 详细的修复和优化决策已记录在 `decisionLog.md`。
---
